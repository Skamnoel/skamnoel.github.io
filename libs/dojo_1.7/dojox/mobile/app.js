/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

//>>built
require({cache:{"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./ready","./_base/sniff","./_base/window"],function(_1,_2,_3,_4,_5){var _6=_5.doc.documentElement,ie=_4("ie"),_7=_4("opera"),_8=Math.floor,ff=_4("ff"),_9=_1.boxModel.replace(/-/,""),_a={"dj_quirks":_4("quirks"),"dj_opera":_7,"dj_khtml":_4("khtml"),"dj_webkit":_4("webkit"),"dj_safari":_4("safari"),"dj_chrome":_4("chrome"),"dj_gecko":_4("mozilla")};if(ie){_a["dj_ie"]=true;_a["dj_ie"+_8(ie)]=true;_a["dj_iequirks"]=_4("quirks");}if(ff){_a["dj_ff"+_8(ff)]=true;}_a["dj_"+_9]=true;var _b="";for(var _c in _a){if(_a[_c]){_b+=_c+" ";}}_6.className=_2.trim(_6.className+" "+_b);_3(90,function(){if(!_1.isBodyLtr()){var _d="dj_rtl dijitRtl "+_b.replace(/ /g,"-rtl ");_6.className=_2.trim(_6.className+" "+_d+"dj_rtl dijitRtl "+_b.replace(/ /g,"-rtl "));}});return _4;});},"dojox/mobile/app/_Widget":function(){define("dojox/mobile/app/_Widget",["dijit","dojo","dojox","dojo/require!dijit/_WidgetBase"],function(_e,_f,_10){_f.provide("dojox.mobile.app._Widget");_f.experimental("dojox.mobile.app._Widget");_f.require("dijit._WidgetBase");_f.declare("dojox.mobile.app._Widget",_e._WidgetBase,{getScroll:function(){return {x:_f.global.scrollX,y:_f.global.scrollY};},connect:function(_11,_12,fn){if(_12.toLowerCase()=="dblclick"||_12.toLowerCase()=="ondblclick"){if(_f.global["Mojo"]){return this.connect(_11,Mojo.Event.tap,fn);}}return this.inherited(arguments);}});});},"dojox/mobile/app/ImageThumbView":function(){define("dojox/mobile/app/ImageThumbView",["dijit","dojo","dojox","dojo/require!dijit/_WidgetBase,dojo/string"],function(_13,_14,_15){_14.provide("dojox.mobile.app.ImageThumbView");_14.experimental("dojox.mobile.app.ImageThumbView");_14.require("dijit._WidgetBase");_14.require("dojo.string");_14.declare("dojox.mobile.app.ImageThumbView",_13._WidgetBase,{items:[],urlParam:"url",labelParam:null,itemTemplate:"<div class=\"mblThumbInner\">"+"<div class=\"mblThumbOverlay\"></div>"+"<div class=\"mblThumbMask\">"+"<div class=\"mblThumbSrc\" style=\"background-image:url(${url})\"></div>"+"</div>"+"</div>",minPadding:4,maxPerRow:3,maxRows:-1,baseClass:"mblImageThumbView",thumbSize:"medium",animationEnabled:true,selectedIndex:-1,cache:null,cacheMustMatch:false,clickEvent:"onclick",cacheBust:false,disableHide:false,constructor:function(_16,_17){},postCreate:function(){this.inherited(arguments);var _18=this;var _19="mblThumbHover";this.addThumb=_14.hitch(this,this.addThumb);this.handleImgLoad=_14.hitch(this,this.handleImgLoad);this.hideCached=_14.hitch(this,this.hideCached);this._onLoadImages={};this.cache=[];this.visibleImages=[];this._cacheCounter=0;this.connect(this.domNode,this.clickEvent,function(_1a){var _1b=_18._getItemNodeFromEvent(_1a);if(_1b&&!_1b._cached){_18.onSelect(_1b._item,_1b._index,_18.items);_14.query(".selected",this.domNode).removeClass("selected");_14.addClass(_1b,"selected");}});_14.addClass(this.domNode,this.thumbSize);this.resize();this.render();},onSelect:function(_1c,_1d,_1e){},_setAnimationEnabledAttr:function(_1f){this.animationEnabled=_1f;_14[_1f?"addClass":"removeClass"](this.domNode,"animated");},_setItemsAttr:function(_20){this.items=_20||[];var _21={};var i;for(i=0;i<this.items.length;i++){_21[this.items[i][this.urlParam]]=1;}var _22=[];for(var url in this._onLoadImages){if(!_21[url]&&this._onLoadImages[url]._conn){_14.disconnect(this._onLoadImages[url]._conn);this._onLoadImages[url].src=null;_22.push(url);}}for(i=0;i<_22.length;i++){delete this._onLoadImages[url];}this.render();},_getItemNode:function(_23){while(_23&&!_14.hasClass(_23,"mblThumb")&&_23!=this.domNode){_23=_23.parentNode;}return (_23==this.domNode)?null:_23;},_getItemNodeFromEvent:function(_24){if(_24.touches&&_24.touches.length>0){_24=_24.touches[0];}return this._getItemNode(_24.target);},resize:function(){this._thumbSize=null;this._size=_14.contentBox(this.domNode);this.disableHide=true;this.render();this.disableHide=false;},hideCached:function(){for(var i=0;i<this.cache.length;i++){if(this.cache[i]){_14.style(this.cache[i],"display","none");}}},render:function(){var i;var url;var _25;var _26;while(this.visibleImages&&this.visibleImages.length>0){_26=this.visibleImages.pop();this.cache.push(_26);if(!this.disableHide){_14.addClass(_26,"hidden");}_26._cached=true;}if(this.cache&&this.cache.length>0){setTimeout(this.hideCached,1000);}if(!this.items||this.items.length==0){return;}for(i=0;i<this.items.length;i++){_25=this.items[i];url=(_14.isString(_25)?_25:_25[this.urlParam]);this.addThumb(_25,url,i);if(this.maxRows>0&&(i+1)/this.maxPerRow>=this.maxRows){break;}}if(!this._thumbSize){return;}var _27=0;var row=-1;var _28=this._thumbSize.w+(this.padding*2);var _29=this._thumbSize.h+(this.padding*2);var _2a=this.thumbNodes=_14.query(".mblThumb",this.domNode);var pos=0;_2a=this.visibleImages;for(i=0;i<_2a.length;i++){if(_2a[i]._cached){continue;}if(pos%this.maxPerRow==0){row++;}_27=pos%this.maxPerRow;this.place(_2a[i],(_27*_28)+this.padding,(row*_29)+this.padding);if(!_2a[i]._loading){_14.removeClass(_2a[i],"hidden");}if(pos==this.selectedIndex){_14[pos==this.selectedIndex?"addClass":"removeClass"](_2a[i],"selected");}pos++;}var _2b=Math.ceil(pos/this.maxPerRow);this._numRows=_2b;this.setContainerHeight((_2b*(this._thumbSize.h+this.padding*2)));},setContainerHeight:function(_2c){_14.style(this.domNode,"height",_2c+"px");},addThumb:function(_2d,url,_2e){var _2f;var _30=false;if(this.cache.length>0){var _31=false;for(var i=0;i<this.cache.length;i++){if(this.cache[i]._url==url){_2f=this.cache.splice(i,1)[0];_31=true;break;}}if(!_2f&&!this.cacheMustMatch){_2f=this.cache.pop();_14.removeClass(_2f,"selected");}else{_30=true;}}if(!_2f){_2f=_14.create("div",{"class":"mblThumb hidden",innerHTML:_14.string.substitute(this.itemTemplate,{url:url},null,this)},this.domNode);}if(this.labelParam){var _32=_14.query(".mblThumbLabel",_2f)[0];if(!_32){_32=_14.create("div",{"class":"mblThumbLabel"},_2f);}_32.innerHTML=_2d[this.labelParam]||"";}_14.style(_2f,"display","");if(!this.disableHide){_14.addClass(_2f,"hidden");}if(!_30){var _33=_14.create("img",{});_33._thumbDiv=_2f;_33._conn=_14.connect(_33,"onload",this.handleImgLoad);_33._url=url;_2f._loading=true;this._onLoadImages[url]=_33;if(_33){_33.src=url;}}this.visibleImages.push(_2f);_2f._index=_2e;_2f._item=_2d;_2f._url=url;_2f._cached=false;if(!this._thumbSize){this._thumbSize=_14.marginBox(_2f);if(this._thumbSize.h==0){this._thumbSize.h=100;this._thumbSize.w=100;}if(this.labelParam){this._thumbSize.h+=8;}this.calcPadding();}},handleImgLoad:function(_34){var img=_34.target;_14.disconnect(img._conn);_14.removeClass(img._thumbDiv,"hidden");img._thumbDiv._loading=false;img._conn=null;var url=img._url;if(this.cacheBust){url+=(url.indexOf("?")>-1?"&":"?")+"cacheBust="+(new Date()).getTime()+"_"+(this._cacheCounter++);}_14.query(".mblThumbSrc",img._thumbDiv).style("backgroundImage","url("+url+")");delete this._onLoadImages[img._url];},calcPadding:function(){var _35=this._size.w;var _36=this._thumbSize.w;var _37=_36+this.minPadding;this.maxPerRow=Math.floor(_35/_37);this.padding=Math.floor((_35-(_36*this.maxPerRow))/(this.maxPerRow*2));},place:function(_38,x,y){_14.style(_38,{"-webkit-transform":"translate("+x+"px,"+y+"px)"});},destroy:function(){var img;var _39=0;for(var url in this._onLoadImages){img=this._onLoadImages[url];if(img){img.src=null;_39++;}}this.inherited(arguments);}});});},"dijit/form/_TextBoxMixin":function(){define("dijit/form/_TextBoxMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/_base/event","dojo/keys","dojo/_base/lang",".."],function(_3a,_3b,dom,_3c,_3d,_3e,_3f){var _40=_3b("dijit.form._TextBoxMixin",null,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",selectOnClick:false,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints);},_setValueAttr:function(_41,_42,_43){var _44;if(_41!==undefined){_44=this.filter(_41);if(typeof _43!="string"){if(_44!==null&&((typeof _44!="number")||!isNaN(_44))){_43=this.filter(this.format(_44,this.constraints));}else{_43="";}}}if(_43!=null&&_43!=undefined&&((typeof _43)!="number"||!isNaN(_43))&&this.textbox.value!=_43){this.textbox.value=_43;this._set("displayedValue",this.get("displayedValue"));}if(this.textDir=="auto"){this.applyTextDir(this.focusNode,_43);}this.inherited(arguments,[_44,_42]);},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value);},_setDisplayedValueAttr:function(_45){if(_45===null||_45===undefined){_45="";}else{if(typeof _45!="string"){_45=String(_45);}}this.textbox.value=_45;this._setValueAttr(this.get("value"),undefined);this._set("displayedValue",this.get("displayedValue"));if(this.textDir=="auto"){this.applyTextDir(this.focusNode,_45);}},format:function(_46){return ((_46==null||_46==undefined)?"":(_46.toString?_46.toString():_46));},parse:function(_47){return _47;},_refreshState:function(){},onInput:function(){},__skipInputEvent:false,_onInput:function(){if(this.textDir=="auto"){this.applyTextDir(this.focusNode,this.focusNode.value);}this._refreshState();this._set("displayedValue",this.get("displayedValue"));},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);var _48=function(e){var _49=e.charOrCode||e.keyCode||229;if(e.type=="keydown"){switch(_49){case _3d.SHIFT:case _3d.ALT:case _3d.CTRL:case _3d.META:case _3d.CAPS_LOCK:return;default:if(_49>=65&&_49<=90){return;}}}if(e.type=="keypress"&&typeof _49!="string"){return;}if(e.type=="input"){if(this.__skipInputEvent){this.__skipInputEvent=false;return;}}else{this.__skipInputEvent=true;}var _4a=_3e.mixin({},e,{charOrCode:_49,wasConsumed:false,preventDefault:function(){_4a.wasConsumed=true;e.preventDefault();},stopPropagation:function(){e.stopPropagation();}});if(this.onInput(_4a)===false){_3c.stop(_4a);}if(_4a.wasConsumed){return;}setTimeout(_3e.hitch(this,"_onInput",_4a),0);};_3a.forEach(["onkeydown","onkeypress","onpaste","oncut","oninput","oncompositionend"],function(_4b){this.connect(this.textbox,_4b,_48);},this);},_blankValue:"",filter:function(val){if(val===null){return this._blankValue;}if(typeof val!="string"){return val;}if(this.trim){val=_3e.trim(val);}if(this.uppercase){val=val.toUpperCase();}if(this.lowercase){val=val.toLowerCase();}if(this.propercase){val=val.replace(/[^\s]+/g,function(_4c){return _4c.substring(0,1).toUpperCase()+_4c.substring(1);});}return val;},_setBlurValue:function(){this._setValueAttr(this.get("value"),true);},_onBlur:function(e){if(this.disabled){return;}this._setBlurValue();this.inherited(arguments);if(this._selectOnClickHandle){this.disconnect(this._selectOnClickHandle);}},_isTextSelected:function(){return this.textbox.selectionStart==this.textbox.selectionEnd;},_onFocus:function(by){if(this.disabled||this.readOnly){return;}if(this.selectOnClick&&by=="mouse"){this._selectOnClickHandle=this.connect(this.domNode,"onmouseup",function(){this.disconnect(this._selectOnClickHandle);if(this._isTextSelected()){_40.selectInputText(this.textbox);}});}this.inherited(arguments);this._refreshState();},reset:function(){this.textbox.value="";this.inherited(arguments);},_setTextDirAttr:function(_4d){if(!this._created||this.textDir!=_4d){this._set("textDir",_4d);this.applyTextDir(this.focusNode,this.focusNode.value);}}});_40._setSelectionRange=_3f._setSelectionRange=function(_4e,_4f,_50){if(_4e.setSelectionRange){_4e.setSelectionRange(_4f,_50);}};_40.selectInputText=_3f.selectInputText=function(_51,_52,_53){_51=dom.byId(_51);if(isNaN(_52)){_52=0;}if(isNaN(_53)){_53=_51.value?_51.value.length:0;}try{_51.focus();_40._setSelectionRange(_51,_52,_53);}catch(e){}};return _40;});},"dojox/mobile/parser":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/_base/lang","dojo/_base/window","dojo/ready"],function(_54,_55,_56,win,_57){var dm=_56.getObject("dojox.mobile",true);var _58=new function(){this.instantiate=function(_59,_5a,_5b){_5a=_5a||{};_5b=_5b||{};var i,ws=[];if(_59){for(i=0;i<_59.length;i++){var n=_59[i];var cls=_56.getObject(n.getAttribute("dojoType")||n.getAttribute("data-dojo-type"));var _5c=cls.prototype;var _5d={},_5e,v,t;_56.mixin(_5d,eval("({"+(n.getAttribute("data-dojo-props")||"")+"})"));_56.mixin(_5d,_5b.defaults);_56.mixin(_5d,_5a);for(_5e in _5c){v=n.getAttributeNode(_5e);v=v&&v.nodeValue;t=typeof _5c[_5e];if(!v&&(t!=="boolean"||v!=="")){continue;}if(t==="string"){_5d[_5e]=v;}else{if(t==="number"){_5d[_5e]=v-0;}else{if(t==="boolean"){_5d[_5e]=(v!=="false");}else{if(t==="object"){_5d[_5e]=eval("("+v+")");}}}}}_5d["class"]=n.className;_5d.style=n.style&&n.style.cssText;v=n.getAttribute("data-dojo-attach-point");if(v){_5d.dojoAttachPoint=v;}v=n.getAttribute("data-dojo-attach-event");if(v){_5d.dojoAttachEvent=v;}var _5f=new cls(_5d,n);ws.push(_5f);var _60=n.getAttribute("jsId")||n.getAttribute("data-dojo-id");if(_60){_56.setObject(_60,_5f);}}for(i=0;i<ws.length;i++){var w=ws[i];!_5b.noStart&&w.startup&&!w._started&&w.startup();}}return ws;};this.parse=function(_61,_62){if(!_61){_61=win.body();}else{if(!_62&&_61.rootNode){_62=_61;_61=_61.rootNode;}}var _63=_61.getElementsByTagName("*");var i,_64=[];for(i=0;i<_63.length;i++){var n=_63[i];if(n.getAttribute("dojoType")||n.getAttribute("data-dojo-type")){_64.push(n);}}var _65=_62&&_62.template?{template:true}:null;return this.instantiate(_64,_65,_62);};}();if(_55.parseOnLoad){_57(100,_58,"parse");}dm.parser=_58;_54.parser=_58;return _58;});},"dojox/mobile/app/SceneController":function(){define("dojox/mobile/app/SceneController",["dijit","dojo","dojox","dojo/require!dojox/mobile/_base"],function(_66,_67,_68){_67.provide("dojox.mobile.app.SceneController");_67.experimental("dojox.mobile.app.SceneController");_67.require("dojox.mobile._base");(function(){var app=_68.mobile.app;var _69={};_67.declare("dojox.mobile.app.SceneController",_68.mobile.View,{stageController:null,keepScrollPos:false,init:function(_6a,_6b){this.sceneName=_6a;this.params=_6b;var _6c=app.resolveTemplate(_6a);this._deferredInit=new _67.Deferred();if(_69[_6a]){this._setContents(_69[_6a]);}else{_67.xhrGet({url:_6c,handleAs:"text"}).addCallback(_67.hitch(this,this._setContents));}return this._deferredInit;},_setContents:function(_6d){_69[this.sceneName]=_6d;this.domNode.innerHTML="<div>"+_6d+"</div>";var _6e="";var _6f=this.sceneName.split("-");for(var i=0;i<_6f.length;i++){_6e+=_6f[i].substring(0,1).toUpperCase()+_6f[i].substring(1);}_6e+="Assistant";this.sceneAssistantName=_6e;var _70=this;_68.mobile.app.loadResourcesForScene(this.sceneName,function(){var _71;if(typeof (_67.global[_6e])!="undefined"){_70._initAssistant();}else{var _72=app.resolveAssistant(_70.sceneName);_67.xhrGet({url:_72,handleAs:"text"}).addCallback(function(_73){try{_67.eval(_73);}catch(e){throw e;}_70._initAssistant();});}});},_initAssistant:function(){var cls=_67.getObject(this.sceneAssistantName);if(!cls){throw Error("Unable to resolve scene assistant "+this.sceneAssistantName);}this.assistant=new cls(this.params);this.assistant.controller=this;this.assistant.domNode=this.domNode.firstChild;this.assistant.setup();this._deferredInit.callback();},query:function(_74,_75){return _67.query(_74,_75||this.domNode);},parse:function(_76){var _77=this._widgets=_68.mobile.parser.parse(_76||this.domNode,{controller:this});for(var i=0;i<_77.length;i++){_77[i].set("controller",this);}},getWindowSize:function(){return {w:_67.global.innerWidth,h:_67.global.innerHeight};},showAlertDialog:function(_78){var _79=_67.marginBox(this.assistant.domNode);var _7a=new _68.mobile.app.AlertDialog(_67.mixin(_78,{controller:this}));this.assistant.domNode.appendChild(_7a.domNode);_7a.show();},popupSubMenu:function(_7b){var _7c=new _68.mobile.app.ListSelector({controller:this,destroyOnHide:true,onChoose:_7b.onChoose});this.assistant.domNode.appendChild(_7c.domNode);_7c.set("data",_7b.choices);_7c.show(_7b.fromNode);}});})();});},"dojox/mobile/app/_base":function(){define("dojox/mobile/app/_base",["dijit","dojo","dojox","dojo/require!dijit/_base,dijit/_WidgetBase,dojox/mobile,dojox/mobile/parser,dojox/mobile/Button,dojox/mobile/app/_event,dojox/mobile/app/_Widget,dojox/mobile/app/StageController,dojox/mobile/app/SceneController,dojox/mobile/app/SceneAssistant,dojox/mobile/app/AlertDialog,dojox/mobile/app/List,dojox/mobile/app/ListSelector,dojox/mobile/app/TextBox,dojox/mobile/app/ImageView,dojox/mobile/app/ImageThumbView"],function(_7d,_7e,_7f){_7e.provide("dojox.mobile.app._base");_7e.experimental("dojox.mobile.app._base");_7e.require("dijit._base");_7e.require("dijit._WidgetBase");_7e.require("dojox.mobile");_7e.require("dojox.mobile.parser");_7e.require("dojox.mobile.Button");_7e.require("dojox.mobile.app._event");_7e.require("dojox.mobile.app._Widget");_7e.require("dojox.mobile.app.StageController");_7e.require("dojox.mobile.app.SceneController");_7e.require("dojox.mobile.app.SceneAssistant");_7e.require("dojox.mobile.app.AlertDialog");_7e.require("dojox.mobile.app.List");_7e.require("dojox.mobile.app.ListSelector");_7e.require("dojox.mobile.app.TextBox");_7e.require("dojox.mobile.app.ImageView");_7e.require("dojox.mobile.app.ImageThumbView");(function(){var _80;var _81;var _82=["dojox.mobile","dojox.mobile.parser"];var _83={};var _84;var _85;var _86=[];function _87(_88,_89){var _8a;var url;do{_8a=_88.pop();if(_8a.source){url=_8a.source;}else{if(_8a.module){url=_7e.moduleUrl(_8a.module)+".js";}else{return;}}}while(_88.length>0&&_83[url]);if(_88.length<1&&_83[url]){_89();return;}_7e.xhrGet({url:url,sync:false}).addCallbacks(function(_8b){_7e["eval"](_8b);_83[url]=true;if(_88.length>0){_87(_88,_89);}else{_89();}},function(){});};var _8c=function(){_80=new _7f.mobile.app.StageController(_85);var _8d={id:"com.test.app",version:"1.0.0",initialScene:"main"};if(_7e.global["appInfo"]){_7e.mixin(_8d,_7e.global["appInfo"]);}_81=_7f.mobile.app.info=_8d;if(_81.title){var _8e=_7e.query("head title")[0]||_7e.create("title",{},_7e.query("head")[0]);document.title=_81.title;}_80.pushScene(_81.initialScene);};var _8f=function(){var _90=false;if(_7e.global.BackButton){BackButton.override();_7e.connect(document,"backKeyDown",function(e){_7e.publish("/dojox/mobile/app/goback");});_90=true;}else{if(_7e.global.Mojo){}}if(_90){_7e.addClass(_7e.body(),"mblNativeBack");}};_7e.mixin(_7f.mobile.app,{init:function(_91){_85=_91||_7e.body();_7f.mobile.app.STAGE_CONTROLLER_ACTIVE=true;_7e.subscribe("/dojox/mobile/app/goback",function(){_80.popScene();});_7e.subscribe("/dojox/mobile/app/alert",function(_92){_7f.mobile.app.getActiveSceneController().showAlertDialog(_92);});_7e.subscribe("/dojox/mobile/app/pushScene",function(_93,_94){_80.pushScene(_93,_94||{});});_7e.xhrGet({url:"view-resources.json",load:function(_95){var _96=[];if(_95){_86=_95=_7e.fromJson(_95);for(var i=0;i<_95.length;i++){if(!_95[i].scene){_96.push(_95[i]);}}}if(_96.length>0){_87(_96,_8c);}else{_8c();}},error:_8c});_8f();},getActiveSceneController:function(){return _80.getActiveSceneController();},getStageController:function(){return _80;},loadResources:function(_97,_98){_87(_97,_98);},loadResourcesForScene:function(_99,_9a){var _9b=[];for(var i=0;i<_86.length;i++){if(_86[i].scene==_99){_9b.push(_86[i]);}}if(_9b.length>0){_87(_9b,_9a);}else{_9a();}},resolveTemplate:function(_9c){return "app/views/"+_9c+"/"+_9c+"-scene.html";},resolveAssistant:function(_9d){return "app/assistants/"+_9d+"-assistant.js";}});})();});},"dojox/mobile/app/List":function(){define(["dijit","dojo","dojox","dojo/require!dojo/string,dijit/_WidgetBase"],function(_9e,_9f,_a0){_9f.provide("dojox.mobile.app.List");_9f.experimental("dojox.mobile.app.List");_9f.require("dojo.string");_9f.require("dijit._WidgetBase");(function(){var _a1={};_9f.declare("dojox.mobile.app.List",_9e._WidgetBase,{items:null,itemTemplate:"",emptyTemplate:"",dividerTemplate:"",dividerFunction:null,labelDelete:"Delete",labelCancel:"Cancel",controller:null,autoDelete:true,enableDelete:true,enableHold:true,formatters:null,_templateLoadCount:0,_mouseDownPos:null,baseClass:"list",constructor:function(){this._checkLoadComplete=_9f.hitch(this,this._checkLoadComplete);this._replaceToken=_9f.hitch(this,this._replaceToken);this._postDeleteAnim=_9f.hitch(this,this._postDeleteAnim);},postCreate:function(){var _a2=this;if(this.emptyTemplate){this._templateLoadCount++;}if(this.itemTemplate){this._templateLoadCount++;}if(this.dividerTemplate){this._templateLoadCount++;}this.connect(this.domNode,"onmousedown",function(_a3){var _a4=_a3;if(_a3.targetTouches&&_a3.targetTouches.length>0){_a4=_a3.targetTouches[0];}var _a5=_a2._getRowNode(_a3.target);if(_a5){_a2._setDataInfo(_a5,_a3);_a2._selectRow(_a5);_a2._mouseDownPos={x:_a4.pageX,y:_a4.pageY};_a2._dragThreshold=null;}});this.connect(this.domNode,"onmouseup",function(_a6){if(_a6.targetTouches&&_a6.targetTouches.length>0){_a6=_a6.targetTouches[0];}var _a7=_a2._getRowNode(_a6.target);if(_a7){_a2._setDataInfo(_a7,_a6);if(_a2._selectedRow){_a2.onSelect(_a7._data,_a7._idx,_a7);}this._deselectRow();}});if(this.enableDelete){this.connect(this.domNode,"mousemove",function(_a8){_9f.stopEvent(_a8);if(!_a2._selectedRow){return;}var _a9=_a2._getRowNode(_a8.target);if(_a2.enableDelete&&_a9&&!_a2._deleting){_a2.handleDrag(_a8);}});}this.connect(this.domNode,"onclick",function(_aa){if(_aa.touches&&_aa.touches.length>0){_aa=_aa.touches[0];}var _ab=_a2._getRowNode(_aa.target,true);if(_ab){_a2._setDataInfo(_ab,_aa);}});this.connect(this.domNode,"mouseout",function(_ac){if(_ac.touches&&_ac.touches.length>0){_ac=_ac.touches[0];}if(_ac.target==_a2._selectedRow){_a2._deselectRow();}});if(!this.itemTemplate){throw Error("An item template must be provided to "+this.declaredClass);}this._loadTemplate(this.itemTemplate,"itemTemplate",this._checkLoadComplete);if(this.emptyTemplate){this._loadTemplate(this.emptyTemplate,"emptyTemplate",this._checkLoadComplete);}if(this.dividerTemplate){this._loadTemplate(this.dividerTemplate,"dividerTemplate",this._checkLoadComplete);}},handleDrag:function(_ad){var _ae=_ad;if(_ad.targetTouches&&_ad.targetTouches.length>0){_ae=_ad.targetTouches[0];}var _af=_ae.pageX-this._mouseDownPos.x;var _b0=Math.abs(_af);if(_b0>10&&!this._dragThreshold){this._dragThreshold=_9f.marginBox(this._selectedRow).w*0.6;if(!this.autoDelete){this.createDeleteButtons(this._selectedRow);}}this._selectedRow.style.left=(_b0>10?_af:0)+"px";if(this._dragThreshold&&this._dragThreshold<_b0){this.preDelete(_af);}},handleDragCancel:function(){if(this._deleting){return;}_9f.removeClass(this._selectedRow,"hold");this._selectedRow.style.left=0;this._mouseDownPos=null;this._dragThreshold=null;this._deleteBtns&&_9f.style(this._deleteBtns,"display","none");},preDelete:function(_b1){var _b2=this;this._deleting=true;_9f.animateProperty({node:this._selectedRow,duration:400,properties:{left:{end:_b1+((_b1>0?1:-1)*this._dragThreshold*0.8)}},onEnd:_9f.hitch(this,function(){if(this.autoDelete){this.deleteRow(this._selectedRow);}})}).play();},deleteRow:function(row){_9f.style(row,{visibility:"hidden",minHeight:"0px"});_9f.removeClass(row,"hold");this._deleteAnimConn=this.connect(row,"webkitAnimationEnd",this._postDeleteAnim);_9f.addClass(row,"collapsed");},_postDeleteAnim:function(_b3){if(this._deleteAnimConn){this.disconnect(this._deleteAnimConn);this._deleteAnimConn=null;}var row=this._selectedRow;var _b4=row.nextSibling;var _b5=row.previousSibling;if(_b5&&_b5._isDivider){if(!_b4||_b4._isDivider){_b5.parentNode.removeChild(_b5);}}row.parentNode.removeChild(row);this.onDelete(row._data,row._idx,this.items);while(_b4){if(_b4._idx){_b4._idx--;}_b4=_b4.nextSibling;}_9f.destroy(row);_9f.query("> *:not(.buttons)",this.domNode).forEach(this.applyClass);this._deleting=false;this._deselectRow();},createDeleteButtons:function(_b6){var mb=_9f.marginBox(_b6);var pos=_9f._abs(_b6,true);if(!this._deleteBtns){this._deleteBtns=_9f.create("div",{"class":"buttons"},this.domNode);this.buttons=[];this.buttons.push(new _a0.mobile.Button({btnClass:"mblRedButton",label:this.labelDelete}));this.buttons.push(new _a0.mobile.Button({btnClass:"mblBlueButton",label:this.labelCancel}));_9f.place(this.buttons[0].domNode,this._deleteBtns);_9f.place(this.buttons[1].domNode,this._deleteBtns);_9f.addClass(this.buttons[0].domNode,"deleteBtn");_9f.addClass(this.buttons[1].domNode,"cancelBtn");this._handleButtonClick=_9f.hitch(this._handleButtonClick);this.connect(this._deleteBtns,"onclick",this._handleButtonClick);}_9f.removeClass(this._deleteBtns,"fade out fast");_9f.style(this._deleteBtns,{display:"",width:mb.w+"px",height:mb.h+"px",top:(_b6.offsetTop)+"px",left:"0px"});},onDelete:function(_b7,_b8,_b9){_b9.splice(_b8,1);if(_b9.length<1){this.render();}},cancelDelete:function(){this._deleting=false;this.handleDragCancel();},_handleButtonClick:function(_ba){if(_ba.touches&&_ba.touches.length>0){_ba=_ba.touches[0];}var _bb=_ba.target;if(_9f.hasClass(_bb,"deleteBtn")){this.deleteRow(this._selectedRow);}else{if(_9f.hasClass(_bb,"cancelBtn")){this.cancelDelete();}else{return;}}_9f.addClass(this._deleteBtns,"fade out");},applyClass:function(_bc,idx,_bd){_9f.removeClass(_bc,"first last");if(idx==0){_9f.addClass(_bc,"first");}if(idx==_bd.length-1){_9f.addClass(_bc,"last");}},_setDataInfo:function(_be,_bf){_bf.item=_be._data;_bf.index=_be._idx;},onSelect:function(_c0,_c1,_c2){},_selectRow:function(row){if(this._deleting&&this._selectedRow&&row!=this._selectedRow){this.cancelDelete();}if(!_9f.hasClass(row,"row")){return;}if(this.enableHold||this.enableDelete){_9f.addClass(row,"hold");}this._selectedRow=row;},_deselectRow:function(){if(!this._selectedRow||this._deleting){return;}this.handleDragCancel();_9f.removeClass(this._selectedRow,"hold");this._selectedRow=null;},_getRowNode:function(_c3,_c4){while(_c3&&!_c3._data&&_c3!=this.domNode){if(!_c4&&_9f.hasClass(_c3,"noclick")){return null;}_c3=_c3.parentNode;}return _c3==this.domNode?null:_c3;},applyTemplate:function(_c5,_c6){return _9f._toDom(_9f.string.substitute(_c5,_c6,this._replaceToken,this.formatters||this));},render:function(){_9f.query("> *:not(.buttons)",this.domNode).forEach(_9f.destroy);if(this.items.length<1&&this.emptyTemplate){_9f.place(_9f._toDom(this.emptyTemplate),this.domNode,"first");}else{this.domNode.appendChild(this._renderRange(0,this.items.length));}if(_9f.hasClass(this.domNode.parentNode,"mblRoundRect")){_9f.addClass(this.domNode.parentNode,"mblRoundRectList");}var _c7=_9f.query("> .row",this.domNode);if(_c7.length>0){_9f.addClass(_c7[0],"first");_9f.addClass(_c7[_c7.length-1],"last");}},_renderRange:function(_c8,_c9){var _ca=[];var row,i;var _cb=document.createDocumentFragment();_c8=Math.max(0,_c8);_c9=Math.min(_c9,this.items.length);for(i=_c8;i<_c9;i++){row=this.applyTemplate(this.itemTemplate,this.items[i]);_9f.addClass(row,"row");row._data=this.items[i];row._idx=i;_ca.push(row);}if(!this.dividerFunction||!this.dividerTemplate){for(i=_c8;i<_c9;i++){_ca[i]._data=this.items[i];_ca[i]._idx=i;_cb.appendChild(_ca[i]);}}else{var _cc=null;var _cd;var _ce;for(i=_c8;i<_c9;i++){_ca[i]._data=this.items[i];_ca[i]._idx=i;_cd=this.dividerFunction(this.items[i]);if(_cd&&_cd!=_cc){_ce=this.applyTemplate(this.dividerTemplate,{label:_cd,item:this.items[i]});_ce._isDivider=true;_cb.appendChild(_ce);_cc=_cd;}_cb.appendChild(_ca[i]);}}return _cb;},_replaceToken:function(_cf,key){if(key.charAt(0)=="!"){_cf=_9f.getObject(key.substr(1),false,_this);}if(typeof _cf=="undefined"){return "";}if(_cf==null){return "";}return key.charAt(0)=="!"?_cf:_cf.toString().replace(/"/g,"&quot;");},_checkLoadComplete:function(){this._templateLoadCount--;if(this._templateLoadCount<1&&this.get("items")){this.render();}},_loadTemplate:function(url,_d0,_d1){if(!url){_d1();return;}if(_a1[url]){this.set(_d0,_a1[url]);_d1();}else{var _d2=this;_9f.xhrGet({url:url,sync:false,handleAs:"text",load:function(_d3){_a1[url]=_9f.trim(_d3);_d2.set(_d0,_a1[url]);_d1();}});}},_setFormattersAttr:function(_d4){this.formatters=_d4;},_setItemsAttr:function(_d5){this.items=_d5||[];if(this._templateLoadCount<1&&_d5){this.render();}},destroy:function(){if(this.buttons){_9f.forEach(this.buttons,function(_d6){_d6.destroy();});this.buttons=null;}this.inherited(arguments);}});})();});},"dojox/mobile/app/ListSelector":function(){define(["dijit","dojo","dojox","dojo/require!dojox/mobile/app/_Widget,dojo/fx"],function(_d7,_d8,_d9){_d8.provide("dojox.mobile.app.ListSelector");_d8.experimental("dojox.mobile.app.ListSelector");_d8.require("dojox.mobile.app._Widget");_d8.require("dojo.fx");_d8.declare("dojox.mobile.app.ListSelector",_d9.mobile.app._Widget,{data:null,controller:null,onChoose:null,destroyOnHide:false,_setDataAttr:function(_da){this.data=_da;if(this.data){this.render();}},postCreate:function(){_d8.addClass(this.domNode,"listSelector");var _db=this;this.connect(this.domNode,"onclick",function(_dc){if(!_d8.hasClass(_dc.target,"listSelectorRow")){return;}if(_db.onChoose){_db.onChoose(_db.data[_dc.target._idx].value);}_db.hide();});this.connect(this.domNode,"onmousedown",function(_dd){if(!_d8.hasClass(_dd.target,"listSelectorRow")){return;}_d8.addClass(_dd.target,"listSelectorRow-selected");});this.connect(this.domNode,"onmouseup",function(_de){if(!_d8.hasClass(_de.target,"listSelectorRow")){return;}_d8.removeClass(_de.target,"listSelectorRow-selected");});this.connect(this.domNode,"onmouseout",function(_df){if(!_d8.hasClass(_df.target,"listSelectorRow")){return;}_d8.removeClass(_df.target,"listSelectorRow-selected");});var _e0=this.controller.getWindowSize();this.mask=_d8.create("div",{"class":"dialogUnderlayWrapper",innerHTML:"<div class=\"dialogUnderlay\"></div>"},this.controller.assistant.domNode);this.connect(this.mask,"onclick",function(){_db.onChoose&&_db.onChoose();_db.hide();});},show:function(_e1){var _e2;var _e3=this.controller.getWindowSize();var _e4;if(_e1){_e4=_d8._abs(_e1);_e2=_e4;}else{_e2.x=_e3.w/2;_e2.y=200;}_d8.style(this.domNode,{opacity:0,display:"",width:Math.floor(_e3.w*0.8)+"px"});var _e5=0;_d8.query(">",this.domNode).forEach(function(_e6){_d8.style(_e6,{"float":"left"});_e5=Math.max(_e5,_d8.marginBox(_e6).w);_d8.style(_e6,{"float":"none"});});_e5=Math.min(_e5,Math.round(_e3.w*0.8))+_d8.style(this.domNode,"paddingLeft")+_d8.style(this.domNode,"paddingRight")+1;_d8.style(this.domNode,"width",_e5+"px");var _e7=_d8.marginBox(this.domNode).h;var _e8=this;var _e9=_e4?Math.max(30,_e4.y-_e7-10):this.getScroll().y+30;var _ea=_d8.animateProperty({node:this.domNode,duration:400,properties:{width:{start:1,end:_e5},height:{start:1,end:_e7},top:{start:_e2.y,end:_e9},left:{start:_e2.x,end:(_e3.w/2-_e5/2)},opacity:{start:0,end:1},fontSize:{start:1}},onEnd:function(){_d8.style(_e8.domNode,"width","inherit");}});var _eb=_d8.fadeIn({node:this.mask,duration:400});_d8.fx.combine([_ea,_eb]).play();},hide:function(){var _ec=this;var _ed=_d8.animateProperty({node:this.domNode,duration:500,properties:{width:{end:1},height:{end:1},opacity:{end:0},fontSize:{end:1}},onEnd:function(){if(_ec.get("destroyOnHide")){_ec.destroy();}}});var _ee=_d8.fadeOut({node:this.mask,duration:400});_d8.fx.combine([_ed,_ee]).play();},render:function(){_d8.empty(this.domNode);_d8.style(this.domNode,"opacity",0);var row;for(var i=0;i<this.data.length;i++){row=_d8.create("div",{"class":"listSelectorRow "+(this.data[i].className||""),innerHTML:this.data[i].label},this.domNode);row._idx=i;if(i==0){_d8.addClass(row,"first");}if(i==this.data.length-1){_d8.addClass(row,"last");}}},destroy:function(){this.inherited(arguments);_d8.destroy(this.mask);}});});},"dojox/mobile/TextBox":function(){define("dojox/mobile/TextBox",["dojo/_base/declare","dojo/dom-construct","dijit/_WidgetBase","dijit/form/_FormValueMixin","dijit/form/_TextBoxMixin"],function(_ef,_f0,_f1,_f2,_f3){return _ef("dojox.mobile.TextBox",[_f1,_f2,_f3],{baseClass:"mblTextBox",_setTypeAttr:null,_setPlaceHolderAttr:"textbox",buildRendering:function(){if(!this.srcNodeRef){this.srcNodeRef=_f0.create("input",{"type":this.type});}this.inherited(arguments);this.textbox=this.focusNode=this.domNode;},postCreate:function(){this.inherited(arguments);this.connect(this.textbox,"onfocus","_onFocus");this.connect(this.textbox,"onblur","_onBlur");}});});},"dojox/mobile/app/ImageView":function(){define("dojox/mobile/app/ImageView",["dijit","dojo","dojox","dojo/require!dojox/mobile/app/_Widget,dojo/fx/easing"],function(_f4,_f5,_f6){_f5.provide("dojox.mobile.app.ImageView");_f5.experimental("dojox.mobile.app.ImageView");_f5.require("dojox.mobile.app._Widget");_f5.require("dojo.fx.easing");_f5.declare("dojox.mobile.app.ImageView",_f6.mobile.app._Widget,{zoom:1,zoomCenterX:0,zoomCenterY:0,maxZoom:5,autoZoomLevel:3,disableAutoZoom:false,disableSwipe:false,autoZoomEvent:null,_leftImg:null,_centerImg:null,_rightImg:null,_leftSmallImg:null,_centerSmallImg:null,_rightSmallImg:null,constructor:function(){this.panX=0;this.panY=0;this.handleLoad=_f5.hitch(this,this.handleLoad);this._updateAnimatedZoom=_f5.hitch(this,this._updateAnimatedZoom);this._updateAnimatedPan=_f5.hitch(this,this._updateAnimatedPan);this._onAnimPanEnd=_f5.hitch(this,this._onAnimPanEnd);},buildRendering:function(){this.inherited(arguments);this.canvas=_f5.create("canvas",{},this.domNode);_f5.addClass(this.domNode,"mblImageView");},postCreate:function(){this.inherited(arguments);this.size=_f5.marginBox(this.domNode);_f5.style(this.canvas,{width:this.size.w+"px",height:this.size.h+"px"});this.canvas.height=this.size.h;this.canvas.width=this.size.w;var _f7=this;this.connect(this.domNode,"onmousedown",function(_f8){if(_f7.isAnimating()){return;}if(_f7.panX){_f7.handleDragEnd();}_f7.downX=_f8.targetTouches?_f8.targetTouches[0].clientX:_f8.clientX;_f7.downY=_f8.targetTouches?_f8.targetTouches[0].clientY:_f8.clientY;});this.connect(this.domNode,"onmousemove",function(_f9){if(_f7.isAnimating()){return;}if((!_f7.downX&&_f7.downX!==0)||(!_f7.downY&&_f7.downY!==0)){return;}if((!_f7.disableSwipe&&_f7.zoom==1)||(!_f7.disableAutoZoom&&_f7.zoom!=1)){var x=_f9.targetTouches?_f9.targetTouches[0].clientX:_f9.pageX;var y=_f9.targetTouches?_f9.targetTouches[0].clientY:_f9.pageY;_f7.panX=x-_f7.downX;_f7.panY=y-_f7.downY;if(_f7.zoom==1){if(Math.abs(_f7.panX)>10){_f7.render();}}else{if(Math.abs(_f7.panX)>10||Math.abs(_f7.panY)>10){_f7.render();}}}});this.connect(this.domNode,"onmouseout",function(_fa){if(!_f7.isAnimating()&&_f7.panX){_f7.handleDragEnd();}});this.connect(this.domNode,"onmouseover",function(_fb){_f7.downX=_f7.downY=null;});this.connect(this.domNode,"onclick",function(_fc){if(_f7.isAnimating()){return;}if(_f7.downX==null||_f7.downY==null){return;}var x=(_fc.targetTouches?_fc.targetTouches[0].clientX:_fc.pageX);var y=(_fc.targetTouches?_fc.targetTouches[0].clientY:_fc.pageY);if(Math.abs(_f7.panX)>14||Math.abs(_f7.panY)>14){_f7.downX=_f7.downY=null;_f7.handleDragEnd();return;}_f7.downX=_f7.downY=null;if(!_f7.disableAutoZoom){if(!_f7._centerImg||!_f7._centerImg._loaded){return;}if(_f7.zoom!=1){_f7.set("animatedZoom",1);return;}var pos=_f5._abs(_f7.domNode);var _fd=_f7.size.w/_f7._centerImg.width;var _fe=_f7.size.h/_f7._centerImg.height;_f7.zoomTo(((x-pos.x)/_fd)-_f7.panX,((y-pos.y)/_fe)-_f7.panY,_f7.autoZoomLevel);}});_f5.connect(this.domNode,"flick",this,"handleFlick");},isAnimating:function(){return this._anim&&this._anim.status()=="playing";},handleDragEnd:function(){this.downX=this.downY=null;if(this.zoom==1){if(!this.panX){return;}var _ff=(this._leftImg&&this._leftImg._loaded)||(this._leftSmallImg&&this._leftSmallImg._loaded);var _100=(this._rightImg&&this._rightImg._loaded)||(this._rightSmallImg&&this._rightSmallImg._loaded);var _101=!(Math.abs(this.panX)<this._centerImg._baseWidth/2)&&((this.panX>0&&_ff?1:0)||(this.panX<0&&_100?1:0));if(!_101){this._animPanTo(0,_f5.fx.easing.expoOut,700);}else{this.moveTo(this.panX);}}else{if(!this.panX&&!this.panY){return;}this.zoomCenterX-=(this.panX/this.zoom);this.zoomCenterY-=(this.panY/this.zoom);this.panX=this.panY=0;}},handleFlick:function(_102){if(this.zoom==1&&_102.duration<500){if(_102.direction=="ltr"){this.moveTo(1);}else{if(_102.direction=="rtl"){this.moveTo(-1);}}this.downX=this.downY=null;}},moveTo:function(_103){_103=_103>0?1:-1;var _104;if(_103<1){if(this._rightImg&&this._rightImg._loaded){_104=this._rightImg;}else{if(this._rightSmallImg&&this._rightSmallImg._loaded){_104=this._rightSmallImg;}}}else{if(this._leftImg&&this._leftImg._loaded){_104=this._leftImg;}else{if(this._leftSmallImg&&this._leftSmallImg._loaded){_104=this._leftSmallImg;}}}this._moveDir=_103;var _105=this;if(_104&&_104._loaded){this._animPanTo(this.size.w*_103,null,500,function(){_105.panX=0;_105.panY=0;if(_103<0){_105._switchImage("left","right");}else{_105._switchImage("right","left");}_105.render();_105.onChange(_103*-1);});}else{this._animPanTo(0,_f5.fx.easing.expoOut,700);}},_switchImage:function(_106,_107){var _108="_"+_106+"SmallImg";var _109="_"+_106+"Img";var _10a="_"+_107+"SmallImg";var _10b="_"+_107+"Img";this[_109]=this._centerImg;this[_108]=this._centerSmallImg;this[_109]._type=_106;if(this[_108]){this[_108]._type=_106;}this._centerImg=this[_10b];this._centerSmallImg=this[_10a];this._centerImg._type="center";if(this._centerSmallImg){this._centerSmallImg._type="center";}this[_10b]=this[_10a]=null;},_animPanTo:function(to,_10c,_10d,_10e){this._animCallback=_10e;this._anim=new _f5.Animation({curve:[this.panX,to],onAnimate:this._updateAnimatedPan,duration:_10d||500,easing:_10c,onEnd:this._onAnimPanEnd});this._anim.play();return this._anim;},onChange:function(_10f){},_updateAnimatedPan:function(_110){this.panX=_110;this.render();},_onAnimPanEnd:function(){this.panX=this.panY=0;if(this._animCallback){this._animCallback();}},zoomTo:function(_111,_112,zoom){this.set("zoomCenterX",_111);this.set("zoomCenterY",_112);this.set("animatedZoom",zoom);},render:function(){var cxt=this.canvas.getContext("2d");cxt.clearRect(0,0,this.canvas.width,this.canvas.height);this._renderImg(this._centerSmallImg,this._centerImg,this.zoom==1?(this.panX<0?1:this.panX>0?-1:0):0);if(this.zoom==1&&this.panX!=0){if(this.panX>0){this._renderImg(this._leftSmallImg,this._leftImg,1);}else{this._renderImg(this._rightSmallImg,this._rightImg,-1);}}},_renderImg:function(_113,_114,_115){var img=(_114&&_114._loaded)?_114:_113;if(!img||!img._loaded){return;}var cxt=this.canvas.getContext("2d");var _116=img._baseWidth;var _117=img._baseHeight;var _118=_116*this.zoom;var _119=_117*this.zoom;var _11a=Math.min(this.size.w,_118);var _11b=Math.min(this.size.h,_119);var _11c=this.dispWidth=img.width*(_11a/_118);var _11d=this.dispHeight=img.height*(_11b/_119);var _11e=this.zoomCenterX-(this.panX/this.zoom);var _11f=this.zoomCenterY-(this.panY/this.zoom);var _120=Math.floor(Math.max(_11c/2,Math.min(img.width-_11c/2,_11e)));var _121=Math.floor(Math.max(_11d/2,Math.min(img.height-_11d/2,_11f)));var _122=Math.max(0,Math.round((img.width-_11c)/2+(_120-img._centerX)));var _123=Math.max(0,Math.round((img.height-_11d)/2+(_121-img._centerY)));var _124=Math.round(Math.max(0,this.canvas.width-_11a)/2);var _125=Math.round(Math.max(0,this.canvas.height-_11b)/2);var _126=_11a;var _127=_11c;if(this.zoom==1&&_115&&this.panX){if(this.panX<0){if(_115>0){_11a-=Math.abs(this.panX);_124=0;}else{if(_115<0){_11a=Math.max(1,Math.abs(this.panX)-5);_124=this.size.w-_11a;}}}else{if(_115>0){_11a=Math.max(1,Math.abs(this.panX)-5);_124=0;}else{if(_115<0){_11a-=Math.abs(this.panX);_124=this.size.w-_11a;}}}_11c=Math.max(1,Math.floor(_11c*(_11a/_126)));if(_115>0){_122=(_122+_127)-(_11c);}_122=Math.floor(_122);}try{cxt.drawImage(img,Math.max(0,_122),_123,Math.min(_127,_11c),_11d,_124,_125,Math.min(_126,_11a),_11b);}catch(e){}},_setZoomAttr:function(_128){this.zoom=Math.min(this.maxZoom,Math.max(1,_128));if(this.zoom==1&&this._centerImg&&this._centerImg._loaded){if(!this.isAnimating()){this.zoomCenterX=this._centerImg.width/2;this.zoomCenterY=this._centerImg.height/2;}this.panX=this.panY=0;}this.render();},_setZoomCenterXAttr:function(_129){if(_129!=this.zoomCenterX){if(this._centerImg&&this._centerImg._loaded){_129=Math.min(this._centerImg.width,_129);}this.zoomCenterX=Math.max(0,Math.round(_129));}},_setZoomCenterYAttr:function(_12a){if(_12a!=this.zoomCenterY){if(this._centerImg&&this._centerImg._loaded){_12a=Math.min(this._centerImg.height,_12a);}this.zoomCenterY=Math.max(0,Math.round(_12a));}},_setZoomCenterAttr:function(_12b){if(_12b.x!=this.zoomCenterX||_12b.y!=this.zoomCenterY){this.set("zoomCenterX",_12b.x);this.set("zoomCenterY",_12b.y);this.render();}},_setAnimatedZoomAttr:function(_12c){if(this._anim&&this._anim.status()=="playing"){return;}this._anim=new _f5.Animation({curve:[this.zoom,_12c],onAnimate:this._updateAnimatedZoom,onEnd:this._onAnimEnd});this._anim.play();},_updateAnimatedZoom:function(_12d){this._setZoomAttr(_12d);},_setCenterUrlAttr:function(_12e){this._setImage("center",_12e);},_setLeftUrlAttr:function(_12f){this._setImage("left",_12f);},_setRightUrlAttr:function(_130){this._setImage("right",_130);},_setImage:function(name,_131){var _132=null;var _133=null;if(_f5.isString(_131)){_133=_131;}else{_133=_131.large;_132=_131.small;}if(this["_"+name+"Img"]&&this["_"+name+"Img"]._src==_133){return;}var _134=this["_"+name+"Img"]=new Image();_134._type=name;_134._loaded=false;_134._src=_133;_134._conn=_f5.connect(_134,"onload",this.handleLoad);if(_132){var _135=this["_"+name+"SmallImg"]=new Image();_135._type=name;_135._loaded=false;_135._conn=_f5.connect(_135,"onload",this.handleLoad);_135._isSmall=true;_135._src=_132;_135.src=_132;}_134.src=_133;},handleLoad:function(evt){var img=evt.target;img._loaded=true;_f5.disconnect(img._conn);var type=img._type;switch(type){case "center":this.zoomCenterX=img.width/2;this.zoomCenterY=img.height/2;break;}var _136=img.height;var _137=img.width;if(_137/this.size.w<_136/this.size.h){img._baseHeight=this.canvas.height;img._baseWidth=_137/(_136/this.size.h);}else{img._baseWidth=this.canvas.width;img._baseHeight=_136/(_137/this.size.w);}img._centerX=_137/2;img._centerY=_136/2;this.render();this.onLoad(img._type,img._src,img._isSmall);},onLoad:function(type,url,_138){}});});},"dojox/mobile/app/StageController":function(){define("dojox/mobile/app/StageController",["dijit","dojo","dojox","dojo/require!dojox/mobile/app/SceneController"],function(_139,dojo,_13a){dojo.provide("dojox.mobile.app.StageController");dojo.experimental("dojox.mobile.app.StageController");dojo.require("dojox.mobile.app.SceneController");dojo.declare("dojox.mobile.app.StageController",null,{scenes:null,effect:"fade",constructor:function(node){this.domNode=node;this.scenes=[];if(dojo.config.mobileAnim){this.effect=dojo.config.mobileAnim;}},getActiveSceneController:function(){return this.scenes[this.scenes.length-1];},pushScene:function(_13b,_13c){if(this._opInProgress){return;}this._opInProgress=true;var node=dojo.create("div",{"class":"scene-wrapper",style:{visibility:"hidden"}},this.domNode);var _13d=new _13a.mobile.app.SceneController({},node);if(this.scenes.length>0){this.scenes[this.scenes.length-1].assistant.deactivate();}this.scenes.push(_13d);var _13e=this;dojo.forEach(this.scenes,this.setZIndex);_13d.stageController=this;_13d.init(_13b,_13c).addCallback(function(){if(_13e.scenes.length==1){_13d.domNode.style.visibility="visible";_13e.scenes[_13e.scenes.length-1].assistant.activate(_13c);_13e._opInProgress=false;}else{_13e.scenes[_13e.scenes.length-2].performTransition(_13e.scenes[_13e.scenes.length-1].domNode,1,_13e.effect,null,function(){_13e.scenes[_13e.scenes.length-1].assistant.activate(_13c);_13e._opInProgress=false;});}});},setZIndex:function(_13f,idx){dojo.style(_13f.domNode,"zIndex",idx+1);},popScene:function(data){if(this._opInProgress){return;}var _140=this;if(this.scenes.length>1){this._opInProgress=true;this.scenes[_140.scenes.length-2].assistant.activate(data);this.scenes[_140.scenes.length-1].performTransition(_140.scenes[this.scenes.length-2].domNode,-1,this.effect,null,function(){_140._destroyScene(_140.scenes[_140.scenes.length-1]);_140.scenes.splice(_140.scenes.length-1,1);_140._opInProgress=false;});}else{}},popScenesTo:function(_141,data){if(this._opInProgress){return;}while(this.scenes.length>2&&this.scenes[this.scenes.length-2].sceneName!=_141){this._destroyScene(this.scenes[this.scenes.length-2]);this.scenes.splice(this.scenes.length-2,1);}this.popScene(data);},_destroyScene:function(_142){_142.assistant.deactivate();_142.assistant.destroy();_142.destroyRecursive();}});});},"dojox/mobile/app/_event":function(){define("dojox/mobile/app/_event",["dijit","dojo","dojox"],function(_143,dojo,_144){dojo.provide("dojox.mobile.app._event");dojo.experimental("dojox.mobile.app._event.js");dojo.mixin(_144.mobile.app,{eventMap:{},connectFlick:function(_145,_146,_147){var _148;var _149;var _14a=false;var _14b;var _14c;var _14d;var _14e;var _14f;var time;var _150=dojo.connect("onmousedown",_145,function(_151){_14a=false;_148=_151.targetTouches?_151.targetTouches[0].clientX:_151.clientX;_149=_151.targetTouches?_151.targetTouches[0].clientY:_151.clientY;time=(new Date()).getTime();_14d=dojo.connect(_145,"onmousemove",_152);_14e=dojo.connect(_145,"onmouseup",onUp);});var _152=function(_153){dojo.stopEvent(_153);_14b=_153.targetTouches?_153.targetTouches[0].clientX:_153.clientX;_14c=_153.targetTouches?_153.targetTouches[0].clientY:_153.clientY;if(Math.abs(Math.abs(_14b)-Math.abs(_148))>15){_14a=true;_14f=(_14b>_148)?"ltr":"rtl";}else{if(Math.abs(Math.abs(_14c)-Math.abs(_149))>15){_14a=true;_14f=(_14c>_149)?"ttb":"btt";}}};var onUp=function(_154){dojo.stopEvent(_154);_14d&&dojo.disconnect(_14d);_14e&&dojo.disconnect(_14e);if(_14a){var _155={target:_145,direction:_14f,duration:(new Date()).getTime()-time};if(_146&&_147){_146[_147](_155);}else{_147(_155);}}};}});_144.mobile.app.isIPhone=(dojo.isSafari&&(navigator.userAgent.indexOf("iPhone")>-1||navigator.userAgent.indexOf("iPod")>-1));_144.mobile.app.isWebOS=(navigator.userAgent.indexOf("webOS")>-1);_144.mobile.app.isAndroid=(navigator.userAgent.toLowerCase().indexOf("android")>-1);if(_144.mobile.app.isIPhone||_144.mobile.app.isAndroid){_144.mobile.app.eventMap={onmousedown:"ontouchstart",mousedown:"ontouchstart",onmouseup:"ontouchend",mouseup:"ontouchend",onmousemove:"ontouchmove",mousemove:"ontouchmove"};}dojo._oldConnect=dojo._connect;dojo._connect=function(obj,_156,_157,_158,_159){_156=_144.mobile.app.eventMap[_156]||_156;if(_156=="flick"||_156=="onflick"){if(dojo.global["Mojo"]){_156=Mojo.Event.flick;}else{return _144.mobile.app.connectFlick(obj,_157,_158);}}return dojo._oldConnect(obj,_156,_157,_158,_159);};});},"dojox/mobile/Button":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dijit/_WidgetBase","dijit/form/_ButtonMixin","dijit/form/_FormWidgetMixin"],function(_15a,_15b,_15c,_15d,_15e,_15f,_160){return _15b("dojox.mobile.Button",[_15e,_160,_15f],{baseClass:"mblButton",_setTypeAttr:null,duration:1000,_onClick:function(e){var ret=this.inherited(arguments);if(ret&&this.duration>=0){var _161=this.focusNode||this.domNode;var _162=(this.baseClass+" "+this["class"]).split(" ");_162=_15a.map(_162,function(c){return c+"Selected";});_15c.add(_161,_162);setTimeout(function(){_15c.remove(_161,_162);},this.duration);}return ret;},isFocusable:function(){return false;},buildRendering:function(){if(!this.srcNodeRef){this.srcNodeRef=_15d.create("button",{"type":this.type});}else{if(this._cv){var n=this.srcNodeRef.firstChild;if(n&&n.nodeType===3){n.nodeValue=this._cv(n.nodeValue);}}}this.inherited(arguments);this.focusNode=this.domNode;},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onclick","_onClick");},_setLabelAttr:function(_163){this.inherited(arguments,[this._cv?this._cv(_163):_163]);}});});},"dijit/form/_ButtonMixin":function(){define("dijit/form/_ButtonMixin",["dojo/_base/declare","dojo/dom","dojo/_base/event","../registry"],function(_164,dom,_165,_166){return _164("dijit.form._ButtonMixin",null,{label:"",type:"button",_onClick:function(e){if(this.disabled){_165.stop(e);return false;}var _167=this.onClick(e)===false;if(!_167&&this.type=="submit"&&!(this.valueNode||this.focusNode).form){for(var node=this.domNode;node.parentNode;node=node.parentNode){var _168=_166.byNode(node);if(_168&&typeof _168._onSubmit=="function"){_168._onSubmit(e);_167=true;break;}}}if(_167){e.preventDefault();}return !_167;},postCreate:function(){this.inherited(arguments);dom.setSelectable(this.focusNode,false);},onClick:function(){return true;},_setLabelAttr:function(_169){this._set("label",_169);(this.containerNode||this.focusNode).innerHTML=_169;}});});},"dojox/mobile/app/TextBox":function(){define("dojox/mobile/app/TextBox",["dijit","dojo","dojox","dojo/require!dojox/mobile/TextBox"],function(_16a,dojo,_16b){dojo.provide("dojox.mobile.app.TextBox");dojo.deprecated("dojox.mobile.app.TextBox is deprecated","dojox.mobile.app.TextBox moved to dojox.mobile.TextBox",1.8);dojo.require("dojox.mobile.TextBox");_16b.mobile.app.TextBox=_16b.mobile.TextBox;});},"dojox/mobile/app/SceneAssistant":function(){define("dojox/mobile/app/SceneAssistant",["dijit","dojo","dojox"],function(_16c,dojo,_16d){dojo.provide("dojox.mobile.app.SceneAssistant");dojo.experimental("dojox.mobile.app.SceneAssistant");dojo.declare("dojox.mobile.app.SceneAssistant",null,{constructor:function(){},setup:function(){},activate:function(_16e){},deactivate:function(){},destroy:function(){var _16f=dojo.query("> [widgetId]",this.containerNode).map(_16c.byNode);dojo.forEach(_16f,function(_170){_170.destroyRecursive();});this.disconnect();},connect:function(obj,_171,_172){if(!this._connects){this._connects=[];}this._connects.push(dojo.connect(obj,_171,_172));},disconnect:function(){dojo.forEach(this._connects,dojo.disconnect);this._connects=[];}});});},"dojo/window":function(){define(["./_base/lang","./_base/sniff","./_base/window","./dom","./dom-geometry","./dom-style","./dom-construct"],function(lang,has,_173,dom,geom,_174,_175){has.add("rtl-adjust-position-for-verticalScrollBar",function(win,doc){var body=_173.body(doc),_176=_175.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},body,"last"),div=_175.create("div",{style:{overflow:"hidden",direction:"ltr"}},_176,"last"),ret=geom.position(div).x!=0;_176.removeChild(div);body.removeChild(_176);return ret;});has.add("position-fixed-support",function(win,doc){var body=_173.body(doc),_177=_175.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},body,"last"),_178=_175.create("span",{style:{position:"fixed",left:"0",top:"0"}},_177,"last"),ret=geom.position(_178).x!=geom.position(_177).x;_177.removeChild(_178);body.removeChild(_177);return ret;});var _179=lang.getObject("dojo.window",true);_179.getBox=function(){var _17a=(_173.doc.compatMode=="BackCompat")?_173.body():_173.doc.documentElement,_17b=geom.docScroll(),w,h;if(has("touch")){var _17c=_173.doc.parentWindow||_173.doc.defaultView;w=_17c.innerWidth||_17a.clientWidth;h=_17c.innerHeight||_17a.clientHeight;}else{w=_17a.clientWidth;h=_17a.clientHeight;}return {l:_17b.x,t:_17b.y,w:w,h:h};};_179.get=function(doc){if(has("ie")<9&&_179!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc.parentWindow||doc.defaultView;};_179.scrollIntoView=function(node,pos){try{node=dom.byId(node);var doc=node.ownerDocument||_173.doc,body=_173.body(doc),html=doc.documentElement||body.parentNode,isIE=has("ie"),isWK=has("webkit");if(node==body||node==html){return;}if(!(has("mozilla")||isIE||isWK||has("opera")||has("trident"))&&("scrollIntoView" in node)){node.scrollIntoView(false);return;}var _17d=doc.compatMode=="BackCompat",_17e=Math.min(body.clientWidth||html.clientWidth,html.clientWidth||body.clientWidth),_17f=Math.min(body.clientHeight||html.clientHeight,html.clientHeight||body.clientHeight),_180=(isWK||_17d)?body:html,_181=pos||geom.position(node),el=node.parentNode,_182=function(el){return (isIE<=6||(isIE==7&&_17d))?false:(has("position-fixed-support")&&(_174.get(el,"position").toLowerCase()=="fixed"));},self=this,_183=function(el,x,y){if(el.tagName=="BODY"||el.tagName=="HTML"){self.get(el.ownerDocument).scrollBy(x,y);}else{x&&(el.scrollLeft+=x);y&&(el.scrollTop+=y);}};if(_182(node)){return;}while(el){if(el==body){el=_180;}var _184=geom.position(el),_185=_182(el),rtl=_174.getComputedStyle(el).direction.toLowerCase()=="rtl";if(el==_180){_184.w=_17e;_184.h=_17f;if(_180==html&&(isIE||has("trident"))&&rtl){_184.x+=_180.offsetWidth-_184.w;}if(_184.x<0||!isIE||isIE>=9||has("trident")){_184.x=0;}if(_184.y<0||!isIE||isIE>=9||has("trident")){_184.y=0;}}else{var pb=geom.getPadBorderExtents(el);_184.w-=pb.w;_184.h-=pb.h;_184.x+=pb.l;_184.y+=pb.t;var _186=el.clientWidth,_187=_184.w-_186;if(_186>0&&_187>0){if(rtl&&has("rtl-adjust-position-for-verticalScrollBar")){_184.x+=_187;}_184.w=_186;}_186=el.clientHeight;_187=_184.h-_186;if(_186>0&&_187>0){_184.h=_186;}}if(_185){if(_184.y<0){_184.h+=_184.y;_184.y=0;}if(_184.x<0){_184.w+=_184.x;_184.x=0;}if(_184.y+_184.h>_17f){_184.h=_17f-_184.y;}if(_184.x+_184.w>_17e){_184.w=_17e-_184.x;}}var l=_181.x-_184.x,t=_181.y-_184.y,r=l+_181.w-_184.w,bot=t+_181.h-_184.h;var s,old;if(r*l>0&&(!!el.scrollLeft||el==_180||el.scrollWidth>el.offsetHeight)){s=Math[l<0?"max":"min"](l,r);if(rtl&&((isIE==8&&!_17d)||isIE>=9||has("trident"))){s=-s;}old=el.scrollLeft;_183(el,s,0);s=el.scrollLeft-old;_181.x-=s;}if(bot*t>0&&(!!el.scrollTop||el==_180||el.scrollHeight>el.offsetHeight)){s=Math.ceil(Math[t<0?"max":"min"](t,bot));old=el.scrollTop;_183(el,0,s);s=el.scrollTop-old;_181.y-=s;}el=(el!=_180)&&!_185&&el.parentNode;}}catch(error){console.error("scrollIntoView: "+error);node.scrollIntoView(false);}};return _179;});},"dojox/mobile/app/AlertDialog":function(){define("dojox/mobile/app/AlertDialog",["dijit","dojo","dojox","dojo/require!dijit/_WidgetBase"],function(_188,dojo,_189){dojo.provide("dojox.mobile.app.AlertDialog");dojo.experimental("dojox.mobile.app.AlertDialog");dojo.require("dijit._WidgetBase");dojo.declare("dojox.mobile.app.AlertDialog",_188._WidgetBase,{title:"",text:"",controller:null,buttons:null,defaultButtonLabel:"OK",onChoose:null,constructor:function(){this.onClick=dojo.hitch(this,this.onClick);this._handleSelect=dojo.hitch(this,this._handleSelect);},buildRendering:function(){this.domNode=dojo.create("div",{"class":"alertDialog"});var _18a=dojo.create("div",{"class":"alertDialogBody"},this.domNode);dojo.create("div",{"class":"alertTitle",innerHTML:this.title||""},_18a);dojo.create("div",{"class":"alertText",innerHTML:this.text||""},_18a);var _18b=dojo.create("div",{"class":"alertBtns"},_18a);if(!this.buttons||this.buttons.length==0){this.buttons=[{label:this.defaultButtonLabel,value:"ok","class":"affirmative"}];}var _18c=this;dojo.forEach(this.buttons,function(_18d){var btn=new _189.mobile.Button({btnClass:_18d["class"]||"",label:_18d.label});btn._dialogValue=_18d.value;dojo.place(btn.domNode,_18b);_18c.connect(btn,"onClick",_18c._handleSelect);});var _18e=this.controller.getWindowSize();this.mask=dojo.create("div",{"class":"dialogUnderlayWrapper",innerHTML:"<div class=\"dialogUnderlay\"></div>",style:{width:_18e.w+"px",height:_18e.h+"px"}},this.controller.assistant.domNode);this.connect(this.mask,"onclick",function(){_18c.onChoose&&_18c.onChoose();_18c.hide();});},postCreate:function(){this.subscribe("/dojox/mobile/app/goback",this._handleSelect);},_handleSelect:function(_18f){var node;if(_18f&&_18f.target){node=_18f.target;while(!_188.byNode(node)){node-node.parentNode;}}if(this.onChoose){this.onChoose(node?_188.byNode(node)._dialogValue:undefined);}this.hide();},show:function(){this._doTransition(1);},hide:function(){this._doTransition(-1);},_doTransition:function(dir){var anim;var h=dojo.marginBox(this.domNode.firstChild).h;var _190=this.controller.getWindowSize().h;var high=_190-h;var low=_190;var _191=dojo.fx.slideTo({node:this.domNode,duration:400,top:{start:dir<0?high:low,end:dir<0?low:high}});var _192=dojo[dir<0?"fadeOut":"fadeIn"]({node:this.mask,duration:400});var anim=dojo.fx.combine([_191,_192]);var _193=this;dojo.connect(anim,"onEnd",this,function(){if(dir<0){_193.domNode.style.display="none";dojo.destroy(_193.domNode);dojo.destroy(_193.mask);}});anim.play();},destroy:function(){this.inherited(arguments);dojo.destroy(this.mask);},onClick:function(){}});});},"*noref":1}});define("dojox/mobile/app",["./app/_base"],function(_194){return _194;});require(["dojox/mobile/app"]);